# AD DNS Enumeration & Troubleshooting Notes (THM)

## Overview
This repository documents the process of troubleshooting Active Directory DNS resolution
issues encountered during a Red Team / lateral movement lab.

Although full exploitation and lateral movement were not completed, the primary focus was on
systematically identifying why expected connectivity and name resolution failed, which closely
mirrors real-world troubleshooting scenarios.

---

## Lab Context
- Environment: TryHackMe Active Directory lab
- Attacker Machine: Linux (AttackBox)
- Target Domain: za.tryhackme.com
- Domain Controller IP: 10.200.74.101

---

## Observed Issues
- Standard hostname resolution failed (`NXDOMAIN`)
- Initial assumptions based on lab instructions did not match actual DNS behavior
- AD authentication syntax caused shell-level parsing errors

---

## Investigation & Troubleshooting Steps

### 1. DNS Server Validation
Confirmed that the domain DNS server was reachable:

```bash
nslookup za.tryhackme.com
Result:
Domain resolved correctly
DNS server reachable

2. Domain Controller Discovery (SRV Record)
nslookup -type=SRV _ldap._tcp.za.tryhackme.com

Output:
_ldap._tcp.za.tryhackme.com service = 0 100 389 THMDC.za.tryhackme.com

Finding:
Actual DC hostname: THMDC.za.tryhackme.com
Lab referenced thmdc.za.tryhackme.com
Case mismatch caused resolution failure in this environment

3. Correct Hostname Resolution
nslookup THMDC.za.tryhackme.com
Successfully resolved.

4. AD Authentication on Linux
Attempted Windows-style login:
ssh za\arthur.campbell@THMDC.za.tryhackme.com

Error:
bash: AD: No such file or directory

Reason:
Backslash (\) interpreted by bash

Correct approaches:
ssh "za\\arthur.campbell"@THMDC.za.tryhackme.com
or (preferred):
ssh arthur.campbell@za.tryhackme.com

Key Learnings
AD relies heavily on DNS SRV records
DNS troubleshooting is a prerequisite for lateral movement
Lab environments may behave inconsistently with DNS case handling
UPN format (user@domain) is safest on Linux

Conclusion
Even without completing lateral movement, the troubleshooting workflow itself
mirrors real-world Red Team and internal assessment practices.
